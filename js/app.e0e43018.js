(function(t){function e(e){for(var s,l,a=e[0],r=e[1],c=e[2],m=0,h=[];m<a.length;m++)l=a[m],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&h.push(n[l][0]),n[l]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],s=!0,a=1;a<i.length;a++){var r=i[a];0!==n[r]&&(s=!1)}s&&(o.splice(e--,1),t=l(l.s=i[0]))}return t}var s={},n={app:0},o=[];function l(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=s,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(i,s,function(e){return t[e]}.bind(null,s));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/vue-saolei/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=r;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var s=i("85ec"),n=i.n(s);n.a},"0c1d":function(t,e,i){},"1ab5":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("index")],1)},o=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("mainMap")],1)},a=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map"},[i("div",{staticClass:"level-desc"},[t._v(t._s(t.getLevelDesc))]),i("div",{staticClass:"text-desc",style:t.getPlayDescStyle},[t._v(t._s(t.getPlayDesc))]),t._l(t.mRowList,(function(e,s){return i("div",{key:s,staticClass:"row"},t._l(t.mColumnList,(function(e,n){return i("div",{key:n,staticClass:"cell",style:t.mStyle},[i("div",{staticClass:"cell-content",on:{click:function(e){return t.onClickBlock(s,n)},contextmenu:function(e){return e.preventDefault(),t.onRightClickBlock(s,n)}}},[t.isBlockOpen(s,n)?t._e():i("div",{staticClass:"float-block"},[t.isBlockFlag(s,n)?i("div",{staticClass:"red-flag-s"}):t._e()]),t.isBlockOpen(s,n)&&t.getBlockInfo(s,n)>0?i("span",{staticClass:"text-num",style:t.getBombNumberStyle(s,n)},[t._v(" "+t._s(t.getBlockInfo(s,n))+" ")]):t._e(),t.isBlockOpen(s,n)&&t.isBomb(s,n)?i("div",{staticClass:"bomb"}):t._e()])])})),0)})),i("div",{staticClass:"down-part"},[i("div",{staticClass:"bomb-info"},[i("div",{staticClass:"bomb-icon"}),i("div",{staticClass:"bomb-desc"},[t._v(t._s(t.mBombDesc))])]),i("div",{staticClass:"flag-select",style:t.getFlagSelectStyle,on:{click:t.onClickFlag}},[i("div",{staticClass:"red-flag"})])]),i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"btn-restart",on:{click:t.onClickRestart}},[t._v("重新开始")]),i("div",{staticClass:"btn-next",on:{click:t.onClickNext}},[t._v("下一关")])]),i("toast",{ref:"refToast"})],2)},c=[],u=(i("99af"),i("a434"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.toastShow,expression:"toastShow"}],staticClass:"toast",class:{"toast-act":t.toastShow}},[t._v(" "+t._s(t.toastText)+" ")])}),m=[],h={components:{},data:function(){return{toastShow:!1,toastText:"",mTimer:null}},created:function(){this.log("toast created")},destroyed:function(){},methods:{toast:function(t){var e=this;clearTimeout(this.mTimer),e.toastText=t,e.toastShow=!0,this.mTimer=setTimeout((function(){e.toastShow=!1}),2e3)}}},f=h,v=(i("7bd2"),i("2877")),p=Object(v["a"])(f,u,m,!1,null,null,null),g=p.exports,d={components:{toast:g},data:function(){return{mLevel:30,mCurLevel:1,mRow:0,mColumn:0,mRowList:[],mColumnList:[],mStyle:"",mLose:!1,mWin:!1,mMapInfo:[],mOpenList:[],mFlagList:[],mSelectFlag:!1,mSelectFlagStyle:"",mBombDesc:"",mBombNum:0,Level_Save_Key:"sao_lei_level"}},computed:{getFlagSelectStyle:function(){var t="";return this.mSelectFlag&&(t="border-color: rgb(128, 128, 128) rgb(255, 255, 255) rgb(255, 255, 255) rgb(128, 128, 128); background:rgb(98,183,135)"),t},getLevelDesc:function(){var t="关卡：";return t=t+this.mCurLevel+" / "+this.mLevel,t},getPlayDesc:function(){var t="";return this.mLose?t="任务失败，踩雷了！":this.mWin&&(t="任务成功，你真棒！"),t},getPlayDescStyle:function(){var t="color:#0000ff";return this.mLose?t="color:#ff0000":this.mWin&&(t="color:#00ff00"),t}},created:function(){var t=this.Data.getUserDefaults(this.Level_Save_Key)||1;this.mCurLevel=parseInt(t),this.onClickRestart()},destroyed:function(){},methods:{getBombNumberStyle:function(t,e){var i="color:rgb(0,32,245)",s=this.getBlockInfo(t,e);return 2==s?i="color:rgb(53,125,34)":s>=3&&(i="color:rgb(236,51,35)"),i},onClickBlock:function(t,e){if(this.log("onClickBlock",t,e),this.mWin||this.mLose)this.log("game is over");else{var i=t*this.mColumn+e;if(this.mOpenList[i])this.log("block is open");else{if(this.mSelectFlag)this.mFlagList[i]?this.mFlagList.splice(i,1,!1):this.mFlagList.splice(i,1,!0),this.mSelectFlag=!1,this.setBombDesc();else{if(this.mFlagList[i])return void this.log("block is flag");this.mOpenList.splice(i,1,!0),this.isBomb(t,e)&&(this.mLose=!0),this.autoOpen(t,e)}this.checkWin()}}},onRightClickBlock:function(t,e){if(this.log("onClickBlock",t,e),this.mWin||this.mLose)this.log("game is over");else{var i=t*this.mColumn+e;this.mOpenList[i]?this.log("block is open"):(this.mFlagList[i]?this.mFlagList.splice(i,1,!1):this.mFlagList.splice(i,1,!0),this.setBombDesc(),this.checkWin())}},autoOpen:function(t,e){var i=this.getBlockInfo(t,e);if(0==i){var s=function(t,e){this.log("open",t,e);var i=t-1,n=t+1,o=e-1,l=e+1,a=function(t,e){var i=this.getBlockInfo(t,e);if(0==i){if(!this.isBlockOpen(t,e))return this.openBlock(t,e),s(t,e)}else i>0&&this.openBlock(t,e)}.bind(this);i>=0&&(a(i,e),o>=0&&a(i,o),l<this.mColumn&&a(i,l)),n<=this.mRow&&(a(n,e),o>=0&&a(n,o),l<this.mColumn&&a(n,l)),o>=0&&a(t,o),l<this.mColumn&&a(t,l)}.bind(this);s(t,e)}},checkWin:function(){for(var t=!0,e=0;e<this.mMapInfo.length;e++){var i=this.mMapInfo[e];if(-1==i&&!this.mFlagList[e]){t=!1;break}}if(t)for(e=0;e<this.mOpenList.length;e++)if(-1!=this.mMapInfo[e]&&!this.mOpenList[e]){t=!1;break}this.mWin=t},onClickFlag:function(){this.log("onClickFlag"),this.mSelectFlag=!this.mSelectFlag},onClickRestart:function(){if(this.mWin)this.$nextTick((function(){this.$refs.refToast.toast("过关了，点击下一关")}));else{var t=this.Data.getRowAndColumn(this.mCurLevel);this.mRow=t[0],this.mColumn=t[1];var e=96/this.mRow;this.mStyle="width:".concat(e,"vw;height:").concat(e,"vw"),this.mRowList=[];for(var i=0;i<this.mRow;i++)this.mRowList.push(i);this.mColumnList=[];for(i=0;i<this.mColumn;i++)this.mColumnList.push(i);this.mOpenList=[],this.mFlagList=[],this.mLose=!1,this.mWin=!1;var s=this.mRow*this.mColumn;for(i=0;i<s;i++)this.mOpenList.push(!1),this.mFlagList.push(!1);this.mMapInfo=this.Data.getMapInfo(this.mCurLevel),this.mSelectFlag=!1;var n=0;for(i=0;i<this.mMapInfo.length;i++)-1==this.mMapInfo[i]&&n++;this.mBombNum=n,this.setBombDesc()}},onClickNext:function(){if(this.log("onClickNext"),this.mWin){if(this.mCurLevel>=this.mLevel)return void this.$refs.refToast.toast("恭喜你通关成功");this.mCurLevel=this.mCurLevel+1,this.Data.setUserDefaults(this.Level_Save_Key,this.mCurLevel),this.mWin=!1,this.onClickRestart()}else this.$refs.refToast.toast("胜利后才能玩下一关")},setBombDesc:function(){for(var t=0,e=0;e<this.mFlagList.length;e++)this.mFlagList[e]&&t++;var i=t+" / "+this.mBombNum;this.mBombDesc=i},isBomb:function(t,e){var i=this.getBlockInfo(t,e);return-1==i},isBlockOpen:function(t,e){return this.mOpenList[t*this.mColumn+e]},openBlock:function(t,e){var i=t*this.mColumn+e;this.mOpenList.splice(i,1,!0)},isBlockFlag:function(t,e){return this.mFlagList[t*this.mColumn+e]},getBlockInfo:function(t,e){return this.mMapInfo[t*this.mColumn+e]}}},b=d,C=(i("9df8"),Object(v["a"])(b,r,c,!1,null,"11620de4",null)),k=C.exports,L={components:{mainMap:k},data:function(){return{}},created:function(){this.log("index created")},destroyed:function(){},methods:{}},y=L,w=Object(v["a"])(y,l,a,!1,null,"6f60d070",null),_=w.exports,B={name:"App",components:{index:_}},S=B,O=(i("034f"),Object(v["a"])(S,n,o,!1,null,null,null)),F=O.exports,x=(s["a"].prototype,{init:function(){},random:function(t,e){var i=e-t,s=Math.random();return t+Math.round(s*i)},setUserDefaults:function(t,e){try{var i=window.localStorage;i.setItem(t,e)}catch(s){}},getUserDefaults:function(t){var e="";try{var i=window.localStorage;e=i.getItem(t)||""}catch(s){}return e},getRowAndColumn:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0,i=0;return t<10?(e=7,i=5):t>=10&&t<20?(e=10,i=9):t>=20&&(e=14,i=10),[e,i]},getMapInfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this.getRowAndColumn(t),i=e[0],s=e[1],n=5;t<10||t>=10&&t<20?n=6:t>20&&(n=5);for(var o=[],l=[],a=i*s,r=0;r<a;r++)o.push(0);var c=Math.floor(a/n),u=0;while(1){if(u>=c)break;var m=this.random(0,a-1);o[m]||(o[m]=1,u++)}for(r=0;r<i;r++)for(var h=0;h<s;h++)if(o[r*s+h])l[r*s+h]=-1;else{c=0;var f=r,v=h,p=r-1,g=r+1,d=h-1,b=h+1;p>=0&&(o[p*s+v]&&c++,d>=0&&o[p*s+d]&&c++,b<s&&o[p*s+b]&&c++),g<=i&&(o[g*s+v]&&c++,d>=0&&o[g*s+d]&&c++,b<s&&o[g*s+b]&&c++),d>=0&&o[f*s+d]&&c++,b<s&&o[f*s+b]&&c++,l[r*s+h]=c}return l}}),D=x;s["a"].prototype.log=function(){},s["a"].prototype.Data=D,new s["a"]({render:function(t){return t(F)}}).$mount("#app")},"7bd2":function(t,e,i){"use strict";var s=i("0c1d"),n=i.n(s);n.a},"85ec":function(t,e,i){},"9df8":function(t,e,i){"use strict";var s=i("1ab5"),n=i.n(s);n.a}});